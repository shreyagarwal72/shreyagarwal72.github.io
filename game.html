<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Games - Nextup Studio</title>
<style>
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: white;
  }
  .layout {
    display: flex;
    min-height: 100vh;
  }
  .sidebar {
    width: 220px;
    background: #1c1c1c;
    padding: 20px;
    box-sizing: border-box;
    position: fixed;
    height: 100vh;
    overflow-y: auto;
    top: 0;
    left: 0;
    z-index: 1000;
  }
  .sidebar h2 {
    color: #00bcd4;
    text-align: center;
  }
  .sidebar a {
    display: block;
    color: #00bcd4;
    padding: 10px;
    text-decoration: none;
    margin-bottom: 10px;
    border-radius: 5px;
  }
  .sidebar a.active, .sidebar a:hover {
    background: #0097a7;
    color: white;
    font-weight: bold;
  }
  .main-content {
    margin-left: 220px;
    padding: 20px;
    flex-grow: 1;
    box-sizing: border-box;
    text-align: center;
  }
  button {
    background: #00bcd4;
    border: none;
    padding: 12px 20px;
    border-radius: 5px;
    margin: 8px;
    cursor: pointer;
    font-weight: bold;
    color: #121212;
    font-size: 16px;
  }
  button:hover {
    background: #0097a7;
    color: white;
  }
  #leaderboard {
    max-width: 400px;
    margin: 20px auto 0;
    background: #222;
    padding: 15px;
    border-radius: 10px;
    color: #00bcd4;
    text-align: left;
    display: none;
  }
  #leaderboardList li {
    margin-bottom: 5px;
  }
  input[type="text"], input[type="number"] {
    padding: 8px;
    border-radius: 5px;
    border: none;
    font-size: 16px;
    width: 80%;
    margin-right: 10px;
  }
  #nameInputSection {
    margin-top: 15px;
  }
  /* Responsive */
  @media (max-width: 768px) {
    .sidebar {
      width: 100%;
      height: 60px;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding: 0 10px;
      z-index: 1000;
    }
    .sidebar h2 {
      display: none;
    }
    .sidebar a {
      margin: 0 8px;
      padding: 8px 12px;
      font-size: 14px;
      white-space: nowrap;
    }
    .main-content {
      margin-left: 0;
      margin-top: 60px;
      padding: 10px;
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      margin-bottom: 10px;
    }
  }
</style>
</head>
<body>
  <div class="layout">
    <div class="sidebar">
      <h2>Nextup Studio</h2>
      <a href="index.html">Home</a>
      <a href="yt.html">YouTube</a>
      <a href="journey.html">My Journey</a>
      <a href="game.html" class="active">Game</a>
    </div>
    <div class="main-content">
      <h1 id="gameTitle">Choose a Game to Play</h1>

      <div id="gameChoice">
        <p>Which game do you want to play?</p>
        <button id="btnQuiz">Quiz Game</button>
        <button id="btnHideSeek">Hide and Seek</button>
        <button id="btnRopeBridge">Rope Bridge</button>
        <button id="btnReactionTest">Reaction Time Test</button>
        <button id="btnTicTacToe">Tic Tac Toe</button>

        <hr style="margin:20px 0; border-color:#0097a7;" />

        <button id="showLeaderboardBtn">Show Leaderboard</button>

        <div id="leaderboard">
          <h3>Leaderboard - Top Scores</h3>
          <ol id="leaderboardList"></ol>
          <button id="closeLeaderboardBtn">Close Leaderboard</button>
        </div>
      </div>

      <div id="gameContainer" style="display:none;"></div>
    </div>
  </div>

<script>
  // Leaderboard storage helpers
  function getLeaderboard() {
    return JSON.parse(localStorage.getItem('leaderboard') || '[]');
  }
  function saveLeaderboard(data) {
    localStorage.setItem('leaderboard', JSON.stringify(data));
  }
  function saveScore(name, score, game) {
    if (!name || score == null) return;
    let lb = getLeaderboard();
    lb.push({name, score, game});
    lb.sort((a,b) => b.score - a.score);
    lb = lb.slice(0,10);
    saveLeaderboard(lb);
  }

  // Show leaderboard
  function showLeaderboard() {
    const lbDiv = document.getElementById('leaderboard');
    const lbList = document.getElementById('leaderboardList');
    const lbData = getLeaderboard();
    lbList.innerHTML = '';
    if(lbData.length === 0) {
      lbList.innerHTML = '<li>No scores yet.</li>';
    } else {
      for(const entry of lbData) {
        const li = document.createElement('li');
        li.textContent = `${entry.name} - ${entry.score} (${entry.game})`;
        lbList.appendChild(li);
      }
    }
    lbDiv.style.display = 'block';
    document.getElementById('showLeaderboardBtn').style.display = 'none';
    document.getElementById('gameChoice').style.display = 'none';
    document.getElementById('gameContainer').style.display = 'none';
    document.getElementById('gameTitle').textContent = 'Leaderboard';
  }
  function hideLeaderboard() {
    document.getElementById('leaderboard').style.display = 'none';
    document.getElementById('showLeaderboardBtn').style.display = 'inline-block';
    showGameChoice();
  }

  // Show game choice menu
  function showGameChoice() {
    document.getElementById('gameChoice').style.display = 'block';
    document.getElementById('gameContainer').style.display = 'none';
    document.getElementById('leaderboard').style.display = 'none';
    document.getElementById('showLeaderboardBtn').style.display = 'inline-block';
    document.getElementById('gameTitle').textContent = 'Choose a Game to Play';
  }

  // Event listeners for main menu buttons
  document.getElementById('btnQuiz').addEventListener('click', startQuiz);
  document.getElementById('btnHideSeek').addEventListener('click', loadHideSeek);
  document.getElementById('btnRopeBridge').addEventListener('click', loadRopeBridge);
  document.getElementById('btnReactionTest').addEventListener('click', loadReactionTest);
  document.getElementById('btnTicTacToe').addEventListener('click', loadTicTacToe);
  document.getElementById('showLeaderboardBtn').addEventListener('click', showLeaderboard);
  document.getElementById('closeLeaderboardBtn').addEventListener('click', hideLeaderboard);

  // ===== QUIZ GAME =====
  const quizData = [
    { question: "Minecraft mein Nether ka main portal kaise banate hain?", options: ["Obsidian frame + Flint and Steel", "Wooden frame + Torch", "Stone frame + Pickaxe", "Diamond frame + Fire Charge"], answer: "Obsidian frame + Flint and Steel" },
    { question: "AI ka full form kya hai?", options: ["Artificial Intelligence", "Automatic Input", "Android Interface", "Auto Identification"], answer: "Artificial Intelligence" },
    { question: "YouTube par sabse zyada subscribers wala channel kaun hai?", options: ["T-Series", "PewDiePie", "Cocomelon", "MrBeast"], answer: "MrBeast" },
    { question: "Squid Game mein guard ke mask par kaun sa shape hota hai?", options: ["Circle", "Triangle", "Square", "Star"], answer: "Triangle" },
    { question: "Minecraft mein Creeper kisse dur rehta hai?", options: ["Cat", "Wolf", "Water", "Lava"], answer: "Cat" }
  ];
  let currentQuestion = 0;
  let score = 0;
  const gameContainer = document.getElementById('gameContainer');

  function startQuiz() {
    currentQuestion = 0;
    score = 0;
    document.getElementById('gameTitle').textContent = 'Quiz Game';
    document.getElementById('gameChoice').style.display = 'none';
    gameContainer.style.display = 'block';
    renderQuizQuestion();
  }

  function renderQuizQuestion() {
    if(currentQuestion >= quizData.length) {
      gameContainer.innerHTML = `
      <div style="max-width:600px; margin:auto; background:#1e1e1e; padding:20px; border-radius:10px; text-align:center;">
        <h2>Quiz Completed!</h2>
        <p>Your Score: <strong>${score} / ${quizData.length}</strong></p>
        <input type="text" id="playerNameQuiz" placeholder="Enter your name" style="width:70%; padding:8px; border-radius:5px; border:none; margin-top:10px;">
        <br>
        <button id="submitScoreQuiz" style="margin-top:10px;">Submit Score</button>
        <br>
        <button id="retryQuiz" style="margin-top:10px;">Retry Quiz</button>
        <button id="backToGamesFromQuiz" style="margin-top:10px;">Back to Game Selection</button>
      </div>`;
      
      document.getElementById('submitScoreQuiz').addEventListener('click', () => {
        const name = document.getElementById('playerNameQuiz').value.trim();
        if(!name) {
          alert('Please enter your name');
          return;
        }
        saveScore(name, score, 'Quiz');
        alert('Score saved! You can view it in the leaderboard.');
      });
      document.getElementById('retryQuiz').addEventListener('click', startQuiz);
      document.getElementById('backToGamesFromQuiz').addEventListener('click', showGameChoice);
      return;
    }

    const q = quizData[currentQuestion];
    let html = `<div style="max-width:600px; margin:auto; background:#1e1e1e; padding:20px; border-radius:10px; text-align:left;">
      <h3>${q.question}</h3>
      <div id="quizOptions"></div>
    </div>`;

    gameContainer.innerHTML = html;
    const optionsDiv = document.getElementById('quizOptions');

    q.options.forEach(option => {
      const btn = document.createElement('button');
      btn.textContent = option;
      btn.style.width = '100%';
      btn.style.margin = '5px 0';
      btn.addEventListener('click', () => {
        if(option === q.answer) score++;
        currentQuestion++;
        renderQuizQuestion();
      });
      optionsDiv.appendChild(btn);
    });
  }

  // ===== HIDE AND SEEK =====
  function loadHideSeek() {
    document.getElementById('gameTitle').textContent = 'Hide and Seek';
    document.getElementById('gameChoice').style.display = 'none';
    gameContainer.style.display = 'block';

    gameContainer.innerHTML = `
      <div style="max-width:600px; margin:auto; background:#1e1e1e; padding:20px; border-radius:10px; text-align:center;">
        <p>Click the button to see if you got found!</p>
        <button id="hideSeekBtn">Check Hide Status</button>
        <p id="hideSeekResult" style="margin-top:15px;"></p>
        <input type="text" id="hideSeekName" placeholder="Enter your name (if still hidden)" style="display:none; margin-top:10px; padding:8px; border-radius:5px; border:none; width:70%;">
        <button id="hideSeekSubmit" style="display:none; margin-top:10px;">Submit Score</button>
        <br>
        <button id="restartHideSeek" style="margin-top:15px;">Restart</button>
        <button id="backToGamesHideSeek" style="margin-top:15px;">Back to Game Selection</button>
      </div>`;

    const btn = document.getElementById('hideSeekBtn');
    const result = document.getElementById('hideSeekResult');
    const nameInput = document.getElementById('hideSeekName');
    const submitBtn = document.getElementById('hideSeekSubmit');

    btn.addEventListener('click', () => {
      const found = Math.random() < 0.5;
      if(found) {
        result.textContent = 'Oh no! You got found! 😢';
        nameInput.style.display = 'none';
        submitBtn.style.display = 'none';
      } else {
        result.textContent = 'You are still hidden! 🎉 Please enter your name and submit your score.';
        nameInput.style.display = 'inline-block';
        submitBtn.style.display = 'inline-block';
      }
    });
    submitBtn.addEventListener('click', () => {
      const name = nameInput.value.trim();
      if(!name) {
        alert('Please enter your name');
        return;
      }
      saveScore(name, 1, 'Hide and Seek');
      alert('Score saved! You can view it in the leaderboard.');
      submitBtn.style.display = 'none';
      nameInput.style.display = 'none';
    });
    document.getElementById('restartHideSeek').addEventListener('click', loadHideSeek);
    document.getElementById('backToGamesHideSeek').addEventListener('click', showGameChoice);
  }

  // ===== ROPE BRIDGE =====
  function loadRopeBridge() {
    document.getElementById('gameTitle').textContent = 'Rope Bridge';
    document.getElementById('gameChoice').style.display = 'none';
    gameContainer.style.display = 'block';

    gameContainer.innerHTML = `
      <div style="max-width:600px; margin:auto; background:#1e1e1e; padding:20px; border-radius:10px; text-align:center;">
        <p>Guess a safe step number (1 to 5) to cross the bridge.</p>
        <input id="stepInput" type="number" min="1" max="5" placeholder="Step number" style="padding:8px; border-radius:5px; border:none; width:70%;">
        <br>
        <button id="ropeBridgeBtn" style="margin-top:10px;">Cross</button>
        <p id="ropeBridgeResult" style="margin-top:15px;"></p>
        <input type="text" id="ropeBridgeName" placeholder="Enter your name (if safe)" style="display:none; margin-top:10px; padding:8px; border-radius:5px; border:none; width:70%;">
        <button id="ropeBridgeSubmit" style="display:none; margin-top:10px;">Submit Score</button>
        <br>
        <button id="restartRopeBridge" style="margin-top:15px;">Restart</button>
        <button id="backToGamesRopeBridge" style="margin-top:15px;">Back to Game Selection</button>
      </div>`;

    const crossBtn = document.getElementById('ropeBridgeBtn');
    const result = document.getElementById('ropeBridgeResult');
    const nameInput = document.getElementById('ropeBridgeName');
    const submitBtn = document.getElementById('ropeBridgeSubmit');

    crossBtn.addEventListener('click', () => {
      const step = Number(document.getElementById('stepInput').value);
      if (!step || step < 1 || step > 5) {
        result.textContent = 'Please enter a valid step between 1 and 5.';
        nameInput.style.display = 'none';
        submitBtn.style.display = 'none';
        return;
      }
      const safeStep = Math.floor(Math.random() * 5) + 1;
      if(step === safeStep) {
        result.textContent = 'You crossed safely! 🎉 Please enter your name and submit your score.';
        nameInput.style.display = 'inline-block';
        submitBtn.style.display = 'inline-block';
      } else {
        result.textContent = 'Oops! The bridge broke! You fell. 😢';
        nameInput.style.display = 'none';
        submitBtn.style.display = 'none';
      }
    });
    submitBtn.addEventListener('click', () => {
      const name = nameInput.value.trim();
      if(!name) {
        alert('Please enter your name');
        return;
      }
      saveScore(name, 1, 'Rope Bridge');
      alert('Score saved! You can view it in the leaderboard.');
      submitBtn.style.display = 'none';
      nameInput.style.display = 'none';
    });
    document.getElementById('restartRopeBridge').addEventListener('click', loadRopeBridge);
    document.getElementById('backToGamesRopeBridge').addEventListener('click', showGameChoice);
  }

  // ===== REACTION TIME TEST =====
  let reactionTimeout;
  let reactionStart;
  function loadReactionTest() {
    document.getElementById('game