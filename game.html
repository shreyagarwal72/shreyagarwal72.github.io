<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Games - Nextup Studio</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body, html {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: white;
      height: 100%;
    }

    .layout {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar/Navbar */
    .sidebar {
      background-color: #1c1c1c;
      width: 220px;
      padding: 20px;
      box-sizing: border-box;
      height: 100vh;
      position: fixed;
      top: 0; left: 0;
      overflow-y: auto;
      z-index: 1000;
    }
    .sidebar h2 {
      color: #00bcd4;
      margin-bottom: 25px;
      font-weight: normal;
      font-size: 24px;
      text-align: center;
    }
    .sidebar a {
      display: block;
      color: #00bcd4;
      text-decoration: none;
      margin-bottom: 15px;
      padding: 8px 12px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 18px;
      transition: background-color 0.3s ease;
    }
    .sidebar a:hover {
      background-color: #0097a7;
      color: #fff;
    }
    .sidebar a.active {
      background-color: #0097a7;
      color: #fff;
      font-weight: 700;
    }

    .main-content {
      margin-left: 220px;
      flex: 1;
      padding: 30px;
      box-sizing: border-box;
      text-align: center;
      transition: margin-left 0.3s ease;
    }

    button {
      background-color: #00bcd4;
      color: #121212;
      border: none;
      border-radius: 5px;
      padding: 15px 25px;
      cursor: pointer;
      margin: 10px;
      font-weight: bold;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #0097a7;
      color: white;
    }

    .quiz-container, .hide-seek-container, .rope-bridge-container, .reaction-container {
      max-width: 600px;
      margin: 20px auto 0;
      background: #1e1e1e;
      padding: 20px;
      border-radius: 10px;
      text-align: left;
    }
    .question {
      margin-bottom: 20px;
      font-size: 18px;
    }
    .options button {
      display: block;
      margin: 10px 0;
      width: 100%;
      font-weight: bold;
    }

    input[type="text"], input[type="number"] {
      padding: 8px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
      width: calc(100% - 110px);
      box-sizing: border-box;
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      .sidebar {
        position: relative;
        width: 100%;
        height: auto;
        padding: 15px 10px;
        display: flex;
        justify-content: center;
        overflow-x: auto;
        white-space: nowrap;
      }
      .sidebar h2 {
        display: none;
      }
      .sidebar a {
        display: inline-block;
        margin: 0 10px 0 0;
        padding: 8px 12px;
        font-size: 16px;
      }
      .main-content {
        margin-left: 0;
        padding: 20px 10px 30px 10px;
      }
      input[type="text"], input[type="number"] {
        width: 100%;
        margin-bottom: 10px;
      }
      #submitNameBtn {
        width: 100%;
        margin-left: 0;
      }
    }

    /* Leaderboard styling inside gameChoice */
    #leaderboard {
      max-width: 400px;
      margin: 20px auto 0;
      background: #222;
      padding: 15px;
      border-radius: 10px;
      color: #00bcd4;
      text-align: left;
      display: none;
    }
  </style>
</head>
<body>
  <div class="layout">
    <div class="sidebar">
      <h2>Nextup Studio</h2>
      <a href="index.html">Home</a>
      <a href="yt.html">YouTube</a>
      <a href="journey.html">My Journey</a>
      <a href="game.html" class="active">Game</a>
    </div>

    <div class="main-content">
      <h1 id="gameTitle">Choose a Game to Play</h1>

      <div id="gameChoice">
        <p>Which game do you want to play?</p>
        <button onclick="loadGame('quiz')">Quiz Game</button>
        <button onclick="loadGame('hideSeek')">Hide and Seek</button>
        <button onclick="loadGame('ropeBridge')">Rope Bridge</button>
        <button onclick="loadGame('reactionTest')">Reaction Time Test</button>

        <hr style="margin: 20px 0; border-color: #0097a7;">

        <button id="showLeaderboardBtn" onclick="showLeaderboard()" style="display:none;">Check Leaderboard</button>

        <div id="leaderboard">
          <h3>Leaderboard - Top Scores</h3>
          <ol id="leaderboardList"></ol>
          <button id="closeLeaderboardBtn" onclick="hideLeaderboard()" style="background-color:#0097a7; color:#fff; margin-top:10px; width: 100%;">Close Leaderboard</button>
        </div>
      </div>

      <div id="gameContainer"></div>
    </div>
  </div>

  <script>
    // Quiz data
    const quizData = [
      { question: "Minecraft mein Nether ka main portal kaise banate hain?", options: ["Obsidian frame + Flint and Steel", "Wooden frame + Torch", "Stone frame + Pickaxe", "Diamond frame + Fire Charge"], answer: "Obsidian frame + Flint and Steel" },
      { question: "AI ka full form kya hai?", options: ["Artificial Intelligence", "Automatic Input", "Android Interface", "Auto Identification"], answer: "Artificial Intelligence" },
      { question: "YouTube par sabse zyada subscribers wala channel kaun hai?", options: ["T-Series", "PewDiePie", "Cocomelon", "MrBeast"], answer: "MrBeast" },
      { question: "Squid Game mein guard ke mask par kaun sa shape hota hai?", options: ["Circle", "Triangle", "Square", "Star"], answer: "Triangle" },
      { question: "Minecraft mein Creeper kisse dur rehta hai?", options: ["Cat", "Wolf", "Water", "Lava"], answer: "Cat" }
    ];

    let currentQuestion = 0;
    let score = 0;

    // Quiz Game
    function startQuiz() {
      currentQuestion = 0;
      score = 0;
      renderQuizQuestion();
    }

    function renderQuizQuestion() {
      const container = document.getElementById("gameContainer");
      if (currentQuestion >= quizData.length) {
        container.innerHTML = `
          <div class="quiz-container">
            <h2>Quiz Completed!</h2>
            <p>Your Score: <strong>${score}/${quizData.length}</strong></p>
            <button onclick="startQuiz()">Retry Quiz</button>
            <button onclick="showGameChoice()">Back to Game Selection</button>
            <div id="nameInputSection" style="margin-top:20px;">
              <label for="playerName" style="font-weight:bold;">Enter your name for leaderboard:</label><br/>
              <input type="text" id="playerName" placeholder="Your name" />
              <button id="submitNameBtn">Submit</button>
            </div>
          </div>
        `;

        document.getElementById('submitNameBtn').addEventListener('click', () => {
          const nameInput = document.getElementById('playerName');
          const name = nameInput.value.trim();
          if (name === '') {
            alert('Please enter a valid name!');
            return;
          }
          saveScore(name, score, "Quiz");
          alert('Score saved! Ab aap leaderboard dekh sakte hain game selection screen par.');
          document.getElementById('showLeaderboardBtn').style.display = 'inline-block';
          document.getElementById('nameInputSection').style.display = 'none';
        });

        return;
      }

      const q = quizData[currentQuestion];
      container.innerHTML = `
        <div class="quiz-container">
          <div class="question">${q.question}</div>
          <div class="options">${q.options.map(opt => `<button onclick="checkQuizAnswer('${opt}')">${opt}</button>`).join('')}</div>
        </div>
      `;
    }

    function checkQuizAnswer(selected) {
      if (selected === quizData[currentQuestion].answer) score++;
      currentQuestion++;
      renderQuizQuestion();
    }

    // Hide and Seek Game
    function loadHideSeek() {
      const container = document.getElementById("gameContainer");
      container.innerHTML = `
        <div class="hide-seek-container">
          <p><strong>Hide and Seek Game</strong></p>
          <p>Imagine you're hiding. Click the button to see if you got found!</p>
          <button onclick="hideSeekPlay()">Check Hide Status</button>
          <p id="hideSeekResult"></p>
          <div id="hideSeekNameInput"></div>
          <button onclick="loadHideSeek()" style="margin-top:10px;">Restart</button>
          <button onclick="showGameChoice()" style="margin-top:10px;">Back to Game Selection</button>
        </div>`;
      document.getElementById("hideSeekResult").textContent = "";
      document.getElementById("hideSeekNameInput").innerHTML = "";
    }

    function hideSeekPlay() {
      const resultEl = document.getElementById("hideSeekResult");
      const nameInputEl = document.getElementById("hideSeekNameInput");
      let found = Math.random() < 0.5 ? true : false;
      if(found) {
        resultEl.textContent = "Oh no! You got found! ðŸ˜¢";
        nameInputEl.innerHTML = ""; // no score saved on fail
      } else {
        resultEl.textContent = "You are still hidden! ðŸŽ‰";
        // Score 1 on success
        askNameAndSaveScore(1, "Hide and Seek");
      }
    }

    // Rope Bridge Game
    function loadRopeBridge() {
      const container = document.getElementById("gameContainer");
      container.innerHTML = `
        <div class="rope-bridge-container">
          <p><strong>Rope Bridge Game</strong></p>
          <p>Cross the rope bridge by guessing a safe step number from 1 to 5.</p>
          <input type="number" id="stepInput" min="1" max="5" placeholder="Enter step number (1-5)" />
          <button onclick="checkRopeBridge()">Cross</button>
          <p id="ropeBridgeResult"></p>
          <div id="ropeBridgeNameInput"></div>
          <button onclick="loadRopeBridge()" style="margin-top:10px;">Restart</button>
          <button onclick="showGameChoice()" style="margin-top:10px;">Back to Game Selection</button>
        </div>`;
      document.getElementById("ropeBridgeResult").textContent = "";
      document.getElementById("ropeBridgeNameInput").innerHTML = "";
    }

    function checkRopeBridge() {
      const safeStep = Math.floor(Math.random() * 5) + 1;
      const userStep = parseInt(document.getElementById("stepInput").value);
      const resultEl = document.getElementById("ropeBridgeResult");
      const nameInputEl = document.getElementById("ropeBridgeNameInput");
      nameInputEl.innerHTML = ""; // clear old inputs
      if (isNaN(userStep) || userStep < 1 || userStep > 5) {
        resultEl.textContent = "Please enter a valid step number between 1 and 5.";
        return;
      }
      if(userStep === safeStep) {
        resultEl.textContent = "You crossed safely! ðŸŽ‰";
        askNameAndSaveScore(1, "Rope Bridge");
      } else {
        resultEl.textContent = "Oops! The bridge broke! You fell. ðŸ˜¢";
      }
    }

    // Reaction Time Test Game
    let reactionStartTime = 0;
    let reactionTimeout;
    function loadReactionTest() {
      const container = document.getElementById("gameContainer");
      container.innerHTML = `
        <div class="reaction-container">
          <p><strong>Reaction Time Test</strong></p>
          <p>Wait for the button to turn green, then click it as fast as you can!</p>
          <button id="reactionBtn" style="background-color: red; color: white; width: 100%; padding: 20px; font-size: 20px; border: none; border-radius: 10px; cursor: not-allowed;" disabled>Wait for green...</button>
          <p id="reactionResult" style="margin-top: 20px; font-size: 18px;"></p>
          <div id="reactionNameInput"></div>
          <button onclick="startReactionTest()" style="margin-top: 15px;">Start Test</button>
          <button onclick="showGameChoice()" style="margin-top: 15px;">Back to Game Selection</button>
        </div>`;
      document.getElementById("reactionResult").textContent = "";
      document.getElementById("reactionNameInput").innerHTML = "";
    }
    function startReactionTest() {
      const btn = document.getElementById("reactionBtn");
      const result = document.getElementById("reactionResult");
      const nameInputEl = document.getElementById("reactionNameInput");
      btn.style.backgroundColor = "red";
      btn.textContent = "Wait for green...";
      btn.disabled = true;
      result.textContent = "";
      nameInputEl.innerHTML = "";

      const delay = Math.floor(Math.random() * 3000) + 2000;
      reactionTimeout = setTimeout(() => {
        btn.style.backgroundColor = "green";
        btn.textContent = "Click Now!";
        btn.disabled = false;
        btn.style.cursor = "pointer";
        reactionStartTime = performance.now();
        btn.onclick = () => {
          const reactionTime = performance.now() - reactionStartTime;
          btn.style.backgroundColor = "#00bcd4";
          btn.textContent = `Your reaction time: ${reactionTime.toFixed(2)} ms`;
          btn.disabled = true;
          btn.style.cursor = "default";
          btn.onclick = null;
          // Lower reaction time is better score, invert it: max 3000 ms, score = 3000 - reactionTime
          let score = Math.max(0, Math.round(3000 - reactionTime));
          askNameAndSaveScore(score, "Reaction Test");
        };
      }, delay);

      btn.onclick = () => {
        clearTimeout(reactionTimeout);
        btn.style.backgroundColor = "red";
        btn.textContent = "Too Soon! Wait for green.";
        btn.disabled = true;
        btn.style.cursor = "default";
      };
    }

    // Common function to ask name and save score after game ends
    function askNameAndSaveScore(score, game) {
      // Determine correct container based on game
      let containerId = "";
      switch(game) {
        case "Quiz": containerId = "nameInputSection"; break;
        case "Hide and Seek": containerId = "hideSeekNameInput"; break;
        case "Rope Bridge": containerId = "ropeBridgeNameInput"; break;
        case "Reaction Test": containerId = "reactionNameInput"; break;
        default: containerId = null;
      }
      if (!containerId) return;

      const container = document.getElementById(containerId);
      if (!container) return;

      // If input already exists, donâ€™t add again
      if(container.querySelector("input")) return;

      container.innerHTML = `
        <label style="font-weight:bold;">Enter your name for leaderboard:</label><br/>
        <input type="text" id="playerNameInput" placeholder="Your name" />
        <button id="saveScoreBtn">Save Score</button>
      `;

      document.getElementById('saveScoreBtn').onclick = () => {
        const name = document.getElementById('playerNameInput').value.trim();
        if(name === '') {
          alert("Please enter your name!");
          return;
        }
        saveScore(name, score, game);
        alert("Score saved! Leaderboard updated.");
        container.innerHTML = ""; // Clear input
        document